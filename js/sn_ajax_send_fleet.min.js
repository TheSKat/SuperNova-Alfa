function uni_set_ships(a){a=a.split(",");for(ship_data_id in a){single_ship_data=a[ship_data_id].split("=");jQuery("#"+single_ship_data[0]).html(single_ship_data[1]);if(single_ship_data[0]=="missile"){jQuery("#SendMI").val(single_ship_data[1]);jQuery("#missile2").html(single_ship_data[1])}}}function addToTable(g,a){var d=document.getElementById("fleetstatusrow");if(!d){return}d.style.display="";var c=document.getElementById("fleetstatustable");if(c.rows.length>2){c.deleteRow(2)}var b=document.createElement("td");b.appendChild(document.createTextNode(g));var f=c.insertRow(0);f.className=a?"error":"success";f.appendChild(b);jQuery("#ov_recycle").hide()}function doit(a,b,c,e){var d={mission:a,galaxy:uni_galaxy,system:uni_system,planet:b,planet_type:c,fleet:Array()};if(a==MT_MISSILE){jQuery.extend(d,{missiles:document.uni_missile_form.SendMI.value,structures:document.uni_missile_form.Target.value})}jQuery.post("flotenajax.php?action=send",d,function(f){if(f.indexOf("|")===-1){addToTable(f,1);popup_show($("#message_template").html().replace(/\[MESSAGE\]/g,f).replace(/\[CLASS\]/g,"error_bg"));return}retVals=f.split("|");strInfo=retVals[0];addToTable(retVals[0],0);uni_set_ships(retVals[1]);popup_show($("#message_template").html().replace(/\[MESSAGE\]/g,retVals[0]).replace(/\[CLASS\]/g,"ok_bg"))})};