const TUTORIAL_BLOCK="tutorial";const TUTORIAL_ID="id";const TUTORIAL_CONTENT="content";const TUTORIAL_TITLE="title";const TUTORIAL_NEXT="next";const TUTORIAL_PREV="prev";const TUTORIAL_COOKIE_NAME="tutorial";var tutorial=[];var tutorial_window;var tutorial_windowed=Cookies.getJSON(TUTORIAL_COOKIE_NAME);if(typeof tutorial_windowed==="undefined"){Cookies.set(TUTORIAL_COOKIE_NAME,tutorial_windowed={windowed:0},{expires:365})}var tutorialClose=function(a){if(tutorial_windowed.windowed){tutorial_window.dialog("close")}else{jQuery("#tutorial_block").addClass("hide")}};function tutorialError(a){jQuery("#tutorial_footer").addClass("error").text(a).removeClass("hide")}function tutorialMakeAction(b,a){jQuery.get(SN_ROOT_VIRTUAL+"index.php?page=ajax&mode=tutorial&action="+b+"&id="+jQuery("#tutorial_current").val(),a,"json")}function tutorialGet(b,a){jQuery.get(SN_ROOT_VIRTUAL+"index.php?page=ajax&mode=tutorial&action="+b+"&id="+jQuery("#tutorial_current").val(),function(c){if(c.hasOwnProperty(TUTORIAL_BLOCK)&&c[TUTORIAL_BLOCK]){tutorial=c[TUTORIAL_BLOCK];if(tutorial.hasOwnProperty(TUTORIAL_ID)&&Math.intVal(tutorial[TUTORIAL_ID])){tutorial_change();jQuery("#tutorial_footer").addClass("hide").removeClass("error")}else{tutorialError(a)}}else{tutorialError(language.tutorial_error_load)}},"json")}function tutorial_store_postion(a){tutorial_windowed={windowed:1,position:{top:$(a).css("top"),left:$(a).css("left")}};Cookies.set(TUTORIAL_COOKIE_NAME,tutorial_windowed,{expires:365})}function tutorial_change(){jQuery("#tutorial_current").val(tutorial[TUTORIAL_ID]);jQuery("#tutorial_text").html(tutorial[TUTORIAL_CONTENT]);jQuery("#tutorial_header_additional").html(" - "+tutorial[TUTORIAL_TITLE]);if(Math.intVal(tutorial[TUTORIAL_NEXT])){jQuery("#tutorial_button_next").removeClass("hide");jQuery("#tutorial_button_finish").addClass("hide")}else{jQuery("#tutorial_button_next").addClass("hide");jQuery("#tutorial_button_finish").removeClass("hide")}if(Math.intVal(tutorial[TUTORIAL_PREV])){jQuery("#tutorial_button_prev").removeClass("hide")}else{jQuery("#tutorial_button_prev").addClass("hide")}}function tutorial_window_switch(b,c){if(typeof b!=="undefined"){tutorial_windowed.windowed=Math.intVal(b)}tutorial_window=jQuery("#tutorial_block");if(tutorial_windowed.windowed){jQuery("#tutorial_container").removeClass("border_image_small");jQuery("#tutorial_header").addClass("hide").removeClass("contFJ");jQuery("#tutorial_button_window").addClass("hide");jQuery("#tutorial_button_window_off").removeClass("hide");var a={my:"right bottom",at:"right bottom"};if(typeof tutorial_windowed.position!=="undefined"){a={my:"left top",at:"left+"+tutorial_windowed.position.left+" top+"+tutorial_windowed.position.top}}tutorial_window.dialog({resizable:false,width:"auto",height:"auto",position:a,create:function(d){$(d.target).dialog("widget").css({position:"fixed"}).find(".ui-dialog-titlebar").addClass("ui-dialog-titlebar-show tutorial_dialog_title")},open:function(e){var d=$(e.target).parent();$("#tutorial_header_text").detach().appendTo(d.find(".ui-dialog-title").html(""));tutorial_store_postion($(e.target).parent())},dragStop:function(d,e){tutorial_store_postion($(d.target).parent())}})}else{jQuery("#tutorial_button_window_off").addClass("hide");jQuery("#tutorial_button_window").removeClass("hide");tutorial_windowed.windowed=0;Cookies.set(TUTORIAL_COOKIE_NAME,tutorial_windowed,{expires:365});if(c){sn_reload()}}}jQuery(document).on("click","#tutorial_close",tutorialClose);jQuery(document).on("click","#tutorial_button_next",function(a){tutorialGet("ajaxNext",language.tutorial_error_next)});jQuery(document).on("click","#tutorial_button_prev",function(a){tutorialGet("ajaxPrev",language.tutorial_error_prev)});jQuery(document).on("click","#tutorial_button_finish",function(a){tutorialMakeAction("ajaxFinish",tutorialClose)});jQuery(document).on("click","#tutorial_button_window,#tutorial_button_window_off",function(a){tutorial_window_switch($(this).attr("data-windowed"),true)});